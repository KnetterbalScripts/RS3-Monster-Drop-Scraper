# âš”ï¸ RuneScape Monster Scraper Desktop

A powerful Electron desktop application for scraping monster drops from RuneScape Wiki with full support for the complete itemlist.json database (59,537 items).

![RuneScape Monster Scraper Desktop](app.png)

## âœ¨ Features

### Core Features
- **ğŸ”¥ Desktop Performance**: No browser limitations - handles large databases efficiently
- **ğŸ“Š Complete Database**: Uses itemlist.json (59,537 items) for maximum accuracy
- **ğŸ¯ Smart Item Matching**: Prioritizes tradeable items and handles noted/unnoted variants
- **ğŸš€ Batch Processing**: Queue multiple monsters and scrape them all at once
- **ğŸ’¾ Dual Export Formats**: JSON and Lua export options for maximum compatibility
- **âœ… Selectable Drops UI**: Choose which scraped items to include in the Lua export (per-monster)
- **ğŸŒ HTTP Scraping**: Performs requests from Node.js backend
- **ğŸ¨ Modern UI**: Beautiful dark theme with smooth animations
- **âš¡ Fast & Reliable**: Native desktop performance

### ğŸ†• New: Scrape History
- **ğŸ“œ History Dropdown**: All scraped monsters automatically saved to history
- **ğŸ”„ Quick Re-scraping**: Select any previously scraped monster from dropdown
- **ğŸ”¤ Alphabetical Sorting**: History sorted A-Z for easy finding
- **â™¾ï¸ Unlimited Storage**: No limit on history entries (only unique monsters)
- **ğŸ¯ No Duplicates**: Re-scraping updates timestamp and keeps list clean
- **ğŸ’¾ Persistent**: History survives app restarts

### ğŸ“Š Smart Sorting
- **History Dropdown**: Monsters sorted alphabetically (A-Z)
- **Drops Display**: Items shown alphabetically in results table
- **NPC_LIST**: Monster names sorted alphabetically in group exports
- **LOOT_LIST**: Item IDs sorted numerically (low to high)

## ğŸš€ Quick Start

### Installation
1. **Download** or clone the repository
2. **Install dependencies**: `npm install`
3. **Place itemlist.json** in project root
4. **Run the app**: `npm start` or `npm run dev`

### First Time Use
1. **Launch the app** - Database loads automatically on startup
2. **Enter monster details** - Name and RuneScape Wiki URL
3. **Add to queue** - Queue multiple monsters if desired
4. **Scrape & Download** - Process and export all queued monsters
5. **History builds automatically** - Re-scrape anytime from dropdown!

## ğŸ“‹ How to Use

### Single Monster Scraping
1. Enter **Monster Name** (e.g., "Blue dragon")
2. Enter **Wiki URL** (e.g., https://runescape.wiki/w/Blue_dragon)
3. Click **"Scrape & Download"**
4. Monster automatically added to history âœ…

### Re-scraping from History
1. Click **History Dropdown** at the top
2. Select monster (alphabetically sorted, easy to find!)
3. Name and URL auto-filled
4. Click **"Scrape & Download"** or **"Add to Queue"**

### Batch/Group Scraping
1. Add multiple monsters to queue
2. Check the monsters you want to scrape
3. Click **"Scrape & Download selected group"**
4. All monsters processed and combined into one file

### Exporting
After scraping, you can:
- **Download JSON** - Standard structured data format
- **Export Selected Lua** - Choose which items to include
  - All items checked by default
  - Uncheck items you don't want
  - Click "Export Selected Lua" button

## ğŸ“ Output Formats

### JSON Format
Each monster generates a JSON file like `blue_dragon_drops.json`:

```json
{
  "monster": "Blue dragon",
  "scrapedAt": "2025-10-28T15:30:45.123Z",
  "totalFoundDrops": 25,
  "drops": [
    {
      "itemName": "Dragon bones",
      "itemId": 536
    },
    {
      "itemName": "Blue dragonhide",
      "itemId": 1751
    },
    {
      "itemName": "Magic logs",
      "itemId": 1513
    }
  ]
}
```

**Features:**
- âœ… Clean item names without "(noted)" suffix
- âœ… Accurate item IDs for noted and unnoted versions
- âœ… Items sorted alphabetically by name
- âœ… Consistent naming for easy integration

### Lua Format (Single Monster)
Example `blue_dragon_drops.lua`:

```lua
-- Blue dragon Drops
-- Generated by RS3 Monster Drop Scraper
-- Scraped at: 2025-10-28T15:30:45.123Z
-- Total drops: 25

local Blue_dragon_drops = {210, 450, 536, 562, 995, 1392, 1513, 1751, 2140, 2434}

return Blue_dragon_drops
```

**Features:**
- âœ… Compact numeric array of item IDs
- âœ… Item IDs sorted numerically (low to high)
- âœ… Noted items use correct noted ID via `noteData` mapping
- âœ… Selectable export - choose which items to include

### Lua Format (Group Export)
Example `group_3_monsters_drops.lua`:

```lua
-- NPC LIST - Edit this directly
local NPC_LIST = {
    "Abyssal beast",
    "Blue dragon",
    "Helwyr"
}

-- LOOT LIST - Edit this directly
local LOOT_LIST = {210, 450, 536, 562, 995, 1392, 1513, 1751, 2140, 2434}
```

**Features:**
- âœ… Monster names sorted alphabetically
- âœ… Item IDs sorted numerically
- âœ… Simple format for easy editing
- âœ… Perfect for AutoLooter-style scripts

## ğŸ“œ Scrape History

The app automatically tracks all monsters you've scraped in `scrape-history.json`:

```json
[
  {
    "name": "Nex",
    "url": "https://runescape.wiki/w/Nex",
    "lastScraped": "2025-10-28T14:30:00.000Z"
  },
  {
    "name": "Blue dragon",
    "url": "https://runescape.wiki/w/Blue_dragon",
    "lastScraped": "2025-10-27T10:15:00.000Z"
  }
]
```

**Features:**
- âœ… Unlimited unique monsters
- âœ… No duplicates (re-scraping updates timestamp)
- âœ… Displayed alphabetically in dropdown (no dates shown)
- âœ… Persistent across app restarts
- âœ… Can be manually edited if needed

## ğŸ¯ Built-in Quick Examples

Click any example to auto-fill the form:
- **Abyssal beast** - Slayer creature
- **Blue dragon** - Common monster
- **Helwyr (Boss)** - Heart of Gielinor boss
- **Nex (Boss)** - God Wars Dungeon 2 boss
- **Vindicta (Boss)** - Heart of Gielinor boss

## ğŸ—‚ï¸ Project Structure

```
RuneScape-Monster-Scraper/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.js          # Electron main process & scraping logic
â”‚   â”œâ”€â”€ preload.js       # Secure IPC bridge
â”‚   â””â”€â”€ renderer/
â”‚       â”œâ”€â”€ index.html   # Main UI
â”‚       â”œâ”€â”€ styles.css   # Modern dark theme
â”‚       â””â”€â”€ app.js       # Frontend logic
â”œâ”€â”€ drops/               # Generated JSON and Lua files
â”œâ”€â”€ scrape-history.json  # Auto-generated history file
â”œâ”€â”€ itemlist.json        # Complete item database (59,537 items)
â””â”€â”€ package.json         # Project configuration
```

## ğŸ“Š Database Details

Uses **itemlist.json** as the primary database:
- **~59.5k items** with metadata from game cache
- **Accurate item IDs** and noted/unnoted mapping
- **Tradeable detection** via `notTradeable` and `is_on_ge` flags
- **noteData property** maps base items to their noted versions

### Smart Item Matching
The app intelligently matches scraped item names to database IDs:
1. **Direct name lookup** (case-insensitive)
2. **Variation handling** (apostrophes, spaces, dashes)
3. **Tradeable prioritization** - Prefers tradeable versions
4. **Noted item support** - Automatically uses correct noted IDs
5. **Name cleaning** - Removes "(noted)" suffix for consistent matching

## ğŸ› ï¸ Advanced Features

### Alphabetical Sorting
- **History dropdown**: Monsters sorted A-Z for quick finding
- **Results display**: Drops shown alphabetically by item name
- **Group exports**: NPC_LIST sorted alphabetically

### Numerical Sorting
- **LOOT_LIST**: Item IDs sorted low to high
- **Single exports**: Item IDs in numeric order
- **Consistent ordering**: Same items always in same order

### Error Handling
- Network errors logged to console
- Failed scrapes shown with error message
- Partial results saved even if some monsters fail
- User-friendly error messages in UI

### Performance
- Progress bars for long operations
- Status messages for each step
- Efficient memory usage
- Fast database lookups

## ğŸ¨ UI Features

### Modern Interface
- **Responsive design** - Works on any screen size
- **Dark theme** - Easy on the eyes for long sessions
- **Smooth animations** - Professional feel
- **Real-time feedback** - Progress bars and status updates

### Queue Management
- Add/remove monsters easily
- Checkbox selection for batch operations
- Visual indication of queued monsters
- Clear queue status

### Results Display
- Expandable/collapsible drop lists
- Checkbox selection for each item
- Select all / Deselect all buttons
- Item count statistics
- Export buttons per monster

## ğŸ”§ Development

### Available Scripts
```bash
npm start              # Run the app
npm run dev            # Run with DevTools and hot reload
npm run build          # Build for all platforms
npm run build-win      # Build for Windows only
npm run build-mac      # Build for macOS
npm run build-linux    # Build for Linux
```

### Tech Stack
- **Electron** - Desktop app framework
- **Node.js** - Backend processing
- **HTTPS module** - Web scraping
- **HTML/CSS/JS** - Modern frontend
- **Regex parsing** - HTML table extraction

### Development Mode
Run with `npm run dev` to enable:
- DevTools automatically opened
- Hot reload on file changes
- Detailed console logging
- Better error messages

## ğŸ› Troubleshooting

### Database not loading
- **Check**: `itemlist.json` exists in project root
- **Verify**: File is valid JSON (not corrupted)
- **Permissions**: App has read access to file
- **Console**: Check for specific error messages

### Scraping fails
- **Verify**: Wiki URLs are correct and complete
- **Check**: Internet connection is active
- **Note**: Some pages may have Cloudflare protection
- **Try**: Use the in-app browser for protected pages
- **Console**: Monitor for detailed error messages

### History not working
- **Check**: `scrape-history.json` is writable
- **Permissions**: App can write to project directory
- **Reset**: Delete history file to start fresh
- **Manual edit**: File can be edited manually if needed

### Export issues
- **Folder**: Ensure `/drops` folder exists
- **Permissions**: App can write to drops folder
- **Space**: Check available disk space
- **Path**: Verify no special characters in monster names

### Build issues
- **Dependencies**: Run `npm install` first
- **Node version**: Ensure Node.js 16+ installed
- **Platform**: Use correct build command for your OS
- **Clean**: Try deleting `node_modules` and reinstalling

## ğŸ—ï¸ Building from Source

1. **Clone repository**
   ```bash
   git clone <repository-url>
   cd RS3-Monster-Scraper
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Add database file**
   - Place `itemlist.json` in project root
   - Ensure file is valid JSON

4. **Run development version**
   ```bash
   npm run dev
   ```

5. **Build executable**
   ```bash
   npm run build-win    # Windows
   npm run build-mac    # macOS
   npm run build-linux  # Linux
   ```

6. **Find executable**
   - Built files in `/dist` folder
   - Ready to distribute!

## ğŸ“ Tips & Best Practices

### For Best Results
- âœ… Use official RuneScape Wiki URLs
- âœ… Check history before scraping (avoid duplicates)
- âœ… Use group scraping for related monsters
- âœ… Review drops before exporting selected items
- âœ… Keep `itemlist.json` up to date

### Workflow Suggestions
1. **Start with history** - Check if monster already scraped
2. **Queue similar monsters** - Batch related creatures
3. **Review drops** - Check for accuracy before export
4. **Use Lua for scripts** - Cleaner format for addons
5. **Keep JSON for reference** - Full data with names

### Maintenance
- Periodically update `itemlist.json` for new items
- Clean up old exports from `/drops` folder
- Backup `scrape-history.json` if important
- Check for app updates regularly

## ğŸ”„ Version History

### v1.2 (Current)
- âœ¨ Added unlimited scrape history
- ğŸ”¤ Alphabetical sorting (history, drops, NPC lists)
- ğŸ“Š Numerical sorting (LOOT_LIST)
- ğŸ¯ Improved UI organization
- ğŸ› Fixed noted item ID lookups

### v1.1
- âœ¨ Added scrape history feature
- ğŸ“œ History dropdown
- ğŸ’¾ Persistent history storage
- ğŸ”„ Quick re-scraping

### v1.0
- ğŸ‰ Initial release
- Basic scraping functionality
- JSON and Lua exports
- Queue management

## ğŸ“„ License

MIT License - Created by **Knetterbal**

---

## ğŸ¯ Summary

**RuneScape Monster Scraper** is the most comprehensive desktop tool for scraping monster drops from RuneScape Wiki:

âœ… **59,537 items** in database  
âœ… **Unlimited history** tracking  
âœ… **Alphabetical sorting** everywhere  
âœ… **Smart noted handling**  
âœ… **Dual export formats**  
âœ… **Batch processing**  
âœ… **Modern UI**  
âœ… **Fast & reliable**  

**Ready to scrape monster drops with maximum accuracy and efficiency!** ğŸš€
